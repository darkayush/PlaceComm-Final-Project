<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMU Login</title>
    <link rel="stylesheet" href="CSS/login_css.css">
</head>
<body>
    <div class="container">
        <div class="left-section">
            <div class="logo-background">
                <div>
<<<<<<< HEAD:login.html
                    <img src="Assets/New_Logo.png" alt="BMU Logo" class="logo" style="height:80px;">
=======
                    <img src="../Assets/New_Logo.png" alt="BMU Logo" class="logo" style="height:80px; ">
>>>>>>> ad4334b770eedc91c437d8e87566ba1eb8d2d1f0:HTML/login.html
                </div>
            </div>
            <h1>PlaceComm</h1>
            <h2>BML MUNJAL UNIVERSITY</h2>
            <h3>A HERO GROUP INITIATIVE</h3>
            <p>The Placement Committee (PlaceComm) at BML Munjal University serves as the bridge between students and the corporate world. In addition to inviting various companies to the campus for recruitment, PlaceComm organizes a range of initiatives such as industry talks, study abroad seminars, internship opportunities, and skill-enhancing workshops to benefit the entire student community.</p>
            <p>Our primary focus is to support students in taking their first steps into the professional world, helping them build successful careers. With a commitment to creating lasting partnerships with our corporate collaborators, we aim to lay a strong foundation for our students' futures. At BML Munjal University, we believe this is just the beginning, as we continue to strive for excellence and empower students to achieve their career aspirations.</p>
        </div>
        <div class="right-section">
            <div class="login-box">
                <h3>Welcome! Please login to continue.</h3>
                <form id="loginForm">
                    <label for="userType">User Type</label>
                    <select id="type" name="userType" required>
                        <option value="student">Student</option>
                        <option value="company">Company</option>
                    </select>

                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="first.last.yearbranch@bmu.edu.in" required>

                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="********" required style="margin-bottom:17px;">

                    <button type="submit">Login</button>
                </form>
                <a href="index.html" class="forgot-password">Forgot password?</a>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const type = document.getElementById('type').value;
            const username = document.getElementById('email').value;  // Change 'email' to 'username'
            const password = document.getElementById('password').value;

            try {
                // Send POST request to the login endpoint
                const response = await fetch('http://localhost:3001/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ type, username, password }),  // Use 'username' instead of 'email'
                });

                // Check if response is OK
                if (!response.ok) {
                    const errorMessage = await response.text(); // Get the error message
                    console.error('Server Error:', errorMessage);
                    alert('Server Error: ' + errorMessage);
                    return;
                }

                const result = await response.json();
                
                // Check if the login was successful
                if (result.success) {
                    alert(result.message); // Show success message
                    // Redirect based on user type
                    if (type === 'student') {
                        window.location.href = 'studentDashboard.html'; // Redirect to student dashboard
                    } else if (type === 'company') {
                        window.location.href = 'companyDashboard.html'; // Redirect to company dashboard
                    }
                } else {
                    alert('Invalid credentials or login error');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error occurred while logging in');
            }
        });
    </script>
</body>
</html>
